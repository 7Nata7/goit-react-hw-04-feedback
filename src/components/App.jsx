import React, { useState } from 'react';
import { Section } from '../components/Section/Section'
import { Statistics } from '../components/Statistics/Statistics'
import { FeedbackOptions } from '../components/FeedbackOptions/FeedbackOptions'
import { Notification } from '../components/Notifications/Notifications'
import css from './App.module.css'

export const App = () => {

  const [good, setGood] = useState(0);
  const [neutral, setNeutral] = useState(0);
  const [bad, setBad] = useState(0);


  const handleLeaveFeedback = (option) => {
    switch (option) {
      case 'good':
        setGood(state => state + 1);
        break;
        case 'neutral':
          setNeutral(state => state + 1);
          break;
          case 'bad':
            setBad(state => state + 1);
            break;
            default: 
  };
}

  const countTotalFeedback = () => {
    return good + neutral + bad;
  };

  const countPositiveFeedbackPercentage = () => {
    const totalFeedback = countTotalFeedback();
    return totalFeedback === 0 ? 0 : Math.round((good / totalFeedback) * 100);
  };

    const totalFeedback = countTotalFeedback();

    return (
      <div className={css.section}>
        <Section title="Please leave feedback">
          <FeedbackOptions
            options={ ['good', 'neutral', 'bad'] } 
            onLeaveFeedback={handleLeaveFeedback}
          />
        </Section>

        <Section title="Statistics">
  {totalFeedback === 0 ? (
    <Notification message="There is no feedback" />
  ) : (
    <Statistics
  good={good}
  neutral={neutral}
  bad={bad}
  total={countTotalFeedback()}
  positivePercentage={countPositiveFeedbackPercentage()}
/>
  )}
</Section>
      </div>
    );
  }
